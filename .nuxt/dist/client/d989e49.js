(window.webpackJsonp=window.webpackJsonp||[]).push([[7,4],{304:function(t,e,r){var content=r(308);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(111).default)("23aa7c87",content,!1,{sourceMap:!1})},305:function(t,e,r){var content=r(310);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(111).default)("4a160787",content,!1,{sourceMap:!1})},306:function(t,e,r){var content=r(312);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(111).default)("004255d7",content,!1,{sourceMap:!1})},307:function(t,e,r){"use strict";r(304)},308:function(t,e,r){var o=r(110)((function(i){return i[1]}));o.push([t.i,".projects .no-projects,.projects .project{margin:10px 0;padding:10px}.projects .project{grid-gap:10px;align-items:center;background:var(--track-bg-color);border:1px solid var(--track-border-color);border-radius:var(--button-border-radius);display:grid;grid-template-columns:1fr auto;transition:background .3s,border .3s}.projects .project .project-action button{padding:.8em .5em!important}.projects .add-btn{align-items:center;background:var(--light-gray);display:flex;height:50px;justify-content:center;margin:25px auto;width:50px}",""]),o.locals={},t.exports=o},309:function(t,e,r){"use strict";r(305)},310:function(t,e,r){var o=r(110)((function(i){return i[1]}));o.push([t.i,".tracks .no-tracks,.tracks .track{margin:10px 0;padding:10px}.tracks .track{grid-gap:10px;align-items:center;background:var(--track-bg-color);border:1px solid var(--track-border-color);border-radius:var(--button-border-radius);display:grid;grid-template-columns:80px 25px 1fr auto;transition:background .3s,border .3s}.tracks .track .track-name{word-break:break-all}.tracks .track .track-mute .muted{color:var(--primary)}.tracks .track .track-action button{padding:.8em .5em!important}",""]),o.locals={},t.exports=o},311:function(t,e,r){"use strict";r(306)},312:function(t,e,r){var o=r(110)((function(i){return i[1]}));o.push([t.i,".footer-bar .rec-action button{font-size:1.2em}.footer-bar .rec-btn{width:40px}.footer-bar .rec-btn.active{color:var(--warning)!important;opacity:1!important;pointer-events:none}.footer-bar .project-info{font-size:.75em}.footer-bar .countdown-text{display:inline-block;font-weight:700;text-align:center;width:2em}.footer-bar .progress-bar{left:0;position:absolute;right:0;top:0}.footer-bar .progress-bar .progress{background:var(--green);height:1px}.footer-bar .progress-bar.recording .progress{background:var(--light-red)}@keyframes breath{0%{opacity:1}50%{opacity:.5}to{opacity:1}}",""]),o.locals={},t.exports=o},314:function(t,e,r){var content=r(320);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(111).default)("1822bf33",content,!1,{sourceMap:!1})},316:function(t,e,r){"use strict";r.r(e);r(36);var o=r(10),n=(r(43),r(209),{props:{projects:{type:Array,default:function(){return[]}}},methods:{addProject:function(){this.projects.push({name:"New Project",measures:4,speed:120,beats:4,tracks:[{name:"Track 1",samples:[],hits:[]}]})},removeProject:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("Are you sure?");case 2:if(!r.sent){r.next=4;break}e.projects.splice(t,1);case 4:case"end":return r.stop()}}),r)})))()}}}),c=(r(307),r(35)),component=Object(c.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tracks-mode"},[e("div",{staticClass:"header-bar project-list"},[e("div"),t._v(" "),e("div",{staticClass:"project-name center"},[t._v("\n      DropTheBeat\n    ")]),t._v(" "),e("div",{staticClass:"add-project right"},[e("button",{on:{click:function(e){return t.addProject()}}},[e("i",{staticClass:"fas fa-plus"})])])]),t._v(" "),e("div",{staticClass:"main"},[e("div",{staticClass:"projects"},[t.projects.length?t._e():e("div",{staticClass:"no-projects center"},[t._v("\n        No Projects\n      ")]),t._v(" "),t._l(t.projects,(function(r,o){return e("div",{key:"project_".concat(o),staticClass:"project",on:{click:function(e){return t.$emit("showProject",o)}}},[e("div",{staticClass:"project-name"},[t._v("\n          "+t._s(r.name)+"\n        ")]),t._v(" "),e("div",{staticClass:"project-action"},[e("button",{staticClass:"icon-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.removeProject(o)}}},[e("i",{staticClass:"far fa-trash-alt"})])])])})),t._v(" "),e("button",{staticClass:"add-btn",on:{click:function(e){return t.addProject()}}},[e("i",{staticClass:"fas fa-plus"})])],2)])])}),[],!1,null,null,null);e.default=component.exports},317:function(t,e,r){"use strict";r.r(e);r(36),r(82),r(44),r(14);var o=r(10),n=(r(43),r(208),r(209),{props:{project:{type:Object,default:function(){}},playing:{type:Boolean,default:!1},recording:{type:Boolean,default:!1},contextCurrentTime:{type:Number,default:0}},data:function(){return{editModalVisible:!1,clonedProject:{}}},computed:{tracks:function(){return this.project.tracks},currentMeasure:function(){var t=60/this.project.speed,e=t*this.project.beats,r=t*this.project.beats*this.project.measures;return this.playing?Math.floor(this.contextCurrentTime%r/e):-1}},methods:{showEditModal:function(){this.clonedProject=JSON.parse(JSON.stringify(this.project)),this.editModalVisible=!0},hideEditModal:function(t){this.editModalVisible=!1,t&&this.$emit("update",this.clonedProject)},addTrack:function(){this.project.tracks.push({name:"New Track",samples:[],hits:[]})},removeTrack:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("Are you sure?");case 2:if(!r.sent){r.next=4;break}e.project.tracks.splice(t,1);case 4:case"end":return r.stop()}}),r)})))()}}}),c=(r(309),r(35)),component=Object(c.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tracks-mode"},[e("div",{staticClass:"header-bar project-info"},[e("div",{staticClass:"project-back"},[e("button",{staticClass:"icon-btn",attrs:{disabled:t.playing||t.recording},on:{click:function(e){return t.$emit("back")}}},[e("i",{staticClass:"fas fa-chevron-left"}),t._v("\n        Projects\n      ")])]),t._v(" "),e("div",{staticClass:"project-name center"},[e("span",{on:{click:function(e){return t.showEditModal()}}},[t._v(t._s(t.project.name))])]),t._v(" "),e("div",{staticClass:"add-track right"},[e("button",{attrs:{disabled:t.playing||t.recording},on:{click:function(e){return t.addTrack()}}},[e("i",{staticClass:"fas fa-plus"})])])]),t._v(" "),e("div",{staticClass:"main"},[e("div",{staticClass:"tracks"},[t.tracks.length?t._e():e("div",{staticClass:"no-tracks center"},[t._v("\n        No Tracks\n      ")]),t._v(" "),t._l(t.tracks,(function(track,r){return e("div",{key:"track_".concat(r),staticClass:"track",on:{click:function(e){return t.$emit("showPad",r)}}},[e("div",{staticClass:"track-name"},[t._v("\n          "+t._s(track.name)+"\n        ")]),t._v(" "),e("div",{staticClass:"track-mute"},[e("button",{staticClass:"icon-btn",class:{muted:track.muted},attrs:{disabled:t.playing,title:"mute"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.$emit("muteTrack",r)}}},[track.muted?e("i",{staticClass:"fas fa-volume-mute"}):e("i",{staticClass:"fas fa-volume-down"})])]),t._v(" "),e("div",{staticClass:"track-preview"},t._l(t.project.measures,(function(r,o){return e("div",{key:"measure_".concat(o),staticClass:"measure",class:{active:o===t.currentMeasure}},t._l(track.samples,(function(n,c){return e("div",{key:"sample_".concat(o,"_").concat(c),staticClass:"sample"},t._l(track.hits.filter((function(t){return t.sample===c&&t.measure===r-1})),(function(t,r){return e("div",{key:"hit_".concat(o,"_").concat(c,"_").concat(r),staticClass:"hit",style:"left: ".concat(100*t.pos,"%")})})),0)})),0)})),0),t._v(" "),e("div",{staticClass:"track-action"},[e("button",{staticClass:"icon-btn",attrs:{disabled:t.playing,title:"Remove"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.removeTrack(r)}}},[e("i",{staticClass:"far fa-trash-alt"})]),t._v(" "),e("button",{staticClass:"icon-btn clean-rec-btn",attrs:{disabled:t.playing,title:"Clear all"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.$emit("removeHits")}}},[e("i",{staticClass:"fas fa-eraser"})])])])}))],2)]),t._v(" "),t.editModalVisible?e("PopupModal",{attrs:{title:"Edit Project"},on:{close:function(e){return t.hideEditModal()}}},[e("div",{staticClass:"form edit-grid"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"label"},[t._v("\n          Project Name\n        ")]),t._v(" "),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.clonedProject.name,expression:"clonedProject.name"}],attrs:{type:"text"},domProps:{value:t.clonedProject.name},on:{input:function(e){e.target.composing||t.$set(t.clonedProject,"name",e.target.value)}}})])])]),t._v(" "),e("template",{slot:"footer"},[e("button",{staticClass:"secondary",on:{click:function(e){return t.hideEditModal()}}},[t._v("\n        Cancel\n      ")]),t._v(" "),e("button",{staticClass:"primary",on:{click:function(e){return t.hideEditModal(!0)}}},[t._v("\n        OK\n      ")])])],2):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PopupModal:r(301).default})},318:function(t,e,r){"use strict";r.r(e);r(208);var o={props:{mode:{type:Number,default:0},playing:{type:Boolean,default:!1},recording:{type:Boolean,default:!1},project:{type:Object,default:function(){}},recCountdownText:{type:Number,default:0},contextCurrentTime:{type:Number,default:0}},data:function(){return{editModalVisible:!1,clonedProject:{}}},computed:{tracks:function(){return this.project.tracks},recAnimationSpeed:function(){return 60/this.project.speed},recProgress:function(){var t=60/this.project.speed*this.project.beats*this.project.measures;return this.contextCurrentTime%t/t*100}},methods:{showEditModal:function(){this.clonedProject=JSON.parse(JSON.stringify(this.project)),this.editModalVisible=!0},hideEditModal:function(t){this.editModalVisible=!1,t&&this.$emit("update",this.clonedProject)}}},n=(r(311),r(35)),component=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"rec-bar footer-bar"},[e("style",{tag:"component"},[t._v("\n    .rec-btn.active {\n    animation: breath "+t._s(t.recAnimationSpeed)+"s infinite;\n    }\n  ")]),t._v(" "),t.playing||t.recording?e("div",{staticClass:"progress-bar",class:{recording:t.recording}},[e("div",{staticClass:"progress",style:"width: ".concat(t.recProgress,"%;")})]):t._e(),t._v(" "),e("div",{staticClass:"rec-action"},[2===t.mode?e("button",{staticClass:"icon-btn rec-btn",class:{active:t.recording},attrs:{disabled:t.playing,title:"Rec"},on:{click:function(e){return t.$emit("rec")}}},[t.recCountdownText?e("span",{staticClass:"countdown-text"},[t._v("\n        "+t._s(t.recCountdownText)+"\n      ")]):e("i",{staticClass:"fas fa-record-vinyl"})]):t._e(),t._v(" "),t.playing||t.recording?t._e():e("button",{staticClass:"icon-btn",attrs:{title:"Play"},on:{click:function(e){return t.$emit("play")}}},[e("i",{staticClass:"fas fa-play"})]),t._v(" "),t.playing||t.recording?e("button",{staticClass:"icon-btn",attrs:{title:"Stop"},on:{click:function(e){return t.$emit("stop")}}},[e("i",{staticClass:"fas fa-stop"})]):t._e(),t._v(" "),2===t.mode?e("button",{staticClass:"icon-btn clean-rec-btn",attrs:{disabled:t.playing,title:"Clear all"},on:{click:function(e){return t.$emit("removeHits")}}},[e("i",{staticClass:"fas fa-eraser"})]):t._e()]),t._v(" "),e("div",{staticClass:"project-info right"},[e("button",{staticClass:"icon-btn",attrs:{disabled:t.playing||t.recording},on:{click:function(e){return t.showEditModal()}}},[t._v("\n      "+t._s(t.project.beats)+" Beats x "+t._s(t.project.measures)+"\n      Speed\n      "+t._s(t.project.speed)+"\n      "),e("i",{staticClass:"far fa-edit"})])]),t._v(" "),t.editModalVisible?e("PopupModal",{attrs:{title:"Edit Project"},on:{close:function(e){return t.hideEditModal()}}},[e("div",{staticClass:"form edit-grid"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"label"},[t._v("\n          Measures\n        ")]),t._v(" "),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.clonedProject.measures,expression:"clonedProject.measures",modifiers:{number:!0}}],attrs:{type:"range",min:"1",max:"100",step:"1"},domProps:{value:t.clonedProject.measures},on:{__r:function(e){t.$set(t.clonedProject,"measures",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"field-val"},[t._v("\n            "+t._s(t.clonedProject.measures)+"\n          ")])])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"label"},[t._v("\n          Speed\n        ")]),t._v(" "),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.clonedProject.speed,expression:"clonedProject.speed",modifiers:{number:!0}}],attrs:{type:"range",min:"50",max:"400",step:"1"},domProps:{value:t.clonedProject.speed},on:{__r:function(e){t.$set(t.clonedProject,"speed",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"field-val"},[t._v("\n            "+t._s(t.clonedProject.speed)+"\n          ")])])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"label"},[t._v("\n          Beats\n        ")]),t._v(" "),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.clonedProject.beats,expression:"clonedProject.beats",modifiers:{number:!0}}],attrs:{type:"range",min:"2",max:"7",step:"1"},domProps:{value:t.clonedProject.beats},on:{__r:function(e){t.$set(t.clonedProject,"beats",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"field-val"},[t._v("\n            "+t._s(t.clonedProject.beats)+"\n          ")])])])]),t._v(" "),e("template",{slot:"footer"},[e("button",{staticClass:"secondary",on:{click:function(e){return t.hideEditModal()}}},[t._v("\n        Cancel\n      ")]),t._v(" "),e("button",{staticClass:"primary",on:{click:function(e){return t.hideEditModal(!0)}}},[t._v("\n        OK\n      ")])])],2):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PopupModal:r(301).default})},319:function(t,e,r){"use strict";r(314)},320:function(t,e,r){var o=r(110)((function(i){return i[1]}));o.push([t.i,":root{--white:#f0f0f0;--black:#111;--dark-gray:#333;--gray:#666;--light-gray:#999;--red:#d11;--light-red:#f11;--green:#6ca;--primary:var(--green);--secondary:var(--light-gray);--warning:var(--light-red);--bg-color:var(--black);--font-color:var(--white);--grid-line-color:var(--dark-gray);--overlay-bg-color:rgba(0,0,0,.5);--modal-bg-color:var(--dark-gray);--modal-font-color:var(--light-gray);--modal-border-color:hsla(0,0%,100%,.1);--modal-border-radius:5px;--modal-header-border-color:var(--gray);--modal-footer-border-color:var(--gray);--modal-separator-color:var(--gray);--button-bg-color:var(--white);--button-font-color:var(--dark-gray);--primary-button-bg-color:var(--primary);--primary-button-border-color:var(--primary);--primary-button-font-color:var(--white);--secondary-button-bg-color:initial;--secondary-button-border-color:var(--secondary);--secondary-button-font-color:var(--secondary);--button-border-radius:5px;--icon-button-font-color:var(--white);--transition-sec:0.3s;--track-border-color:var(--gray);--track-bg-color:#161616;--pad-button-color--1:#a7e6d0;--pad-button-color--2:#deedc1;--pad-button-color--3:#fed4b8;--pad-button-color--4:#fdaba2;--pad-button-color--5:#fc8004;--pad-button-color--6:#f59d54;--pad-button-color--7:#ef8152;--pad-button-color--8:#fd8b93;--pad-button-color--9:#fda604;--pad-button-color--10:#fdcb00;--pad-button-color--11:#fee503;--pad-button-color--12:#faff02;--pad-button-color--13:#395a7a;--pad-button-color--14:#3d9a83;--pad-button-color--15:#e0e58e;--pad-button-color--16:#a0d072;background:#111;background:var(--bg-color);font-family:sans-serif}body{margin:75px 0 100px}.__dtb{background:#111;background:var(--bg-color);color:#f0f0f0;color:var(--font-color);-webkit-user-select:none;-moz-user-select:none;user-select:none}.__dtb label{display:inline-block;margin-right:15px}.__dtb hr{background:#666;background:var(--gray);border:0;height:1px;margin:20px 0}.__dtb button,.__dtb input[type=checkbox],.__dtb input[type=text],.__dtb select{-webkit-appearance:none;outline:none}.__dtb input[type=text],.__dtb select{background:#666;background:var(--gray);border:0;border-radius:5px;border-radius:var(--button-border-radius);box-sizing:border-box;color:#f0f0f0;color:var(--white);display:block;font-size:16px;padding:.5em 1em;width:100%}.__dtb select{background:#666 url(\"data:image/svg+xml;utf8,<svg viewBox='0 0 140 140' width='12' height='12' xmlns='http://www.w3.org/2000/svg' fill='%23bfa78a'><path d='m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z'/></svg>\") no-repeat;background:var(--gray) url(\"data:image/svg+xml;utf8,<svg viewBox='0 0 140 140' width='12' height='12' xmlns='http://www.w3.org/2000/svg' fill='%23bfa78a'><path d='m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z'/></svg>\") no-repeat;background-position:right 15px center}.__dtb button,.__dtb input[type=checkbox]{cursor:pointer}.__dtb button[disabled],.__dtb input[type=checkbox][disabled]{cursor:not-allowed}.__dtb button{background:#f0f0f0;background:var(--button-bg-color);border:0;border-radius:100px;color:#333;color:var(--button-font-color);padding:.2em 1em}.__dtb button[disabled]{opacity:.5}.__dtb button.icon-btn{background:transparent none repeat 0 0/auto auto padding-box border-box scroll;background:initial;border-radius:0;color:#f0f0f0;color:var(--icon-button-font-color);padding:0}.__dtb button.icon-btn i{font-size:1.2em;margin:0 .5em}.__dtb input[type=checkbox]{align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border:1px solid #666;border:1px solid var(--gray);border-radius:13px;cursor:pointer;display:inline-flex;justify-content:center;margin-left:0;max-height:26px;max-width:50px;min-height:26px;min-width:50px;transition:.3s;transition:var(--transition-sec);vertical-align:middle}.__dtb input[type=checkbox]:before{background:#666;background:var(--gray);border-radius:10px;color:transparent;content:\".\";display:block;height:20px;left:-12px;position:relative;text-align:center;transition:.3s;transition:var(--transition-sec);width:20px}.__dtb input[type=checkbox]:checked:before{background:#6ca;background:var(--primary);left:12px}.__dtb input[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-bottom:1px solid #999;border-bottom:1px solid var(--light-gray);box-sizing:border-box;display:inline-block;height:1px;vertical-align:middle;width:100%}.__dtb input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background:#fff;border:1px solid #999;border:1px solid var(--light-gray);border-radius:5px;border-radius:var(--button-border-radius);cursor:pointer;max-height:20px;max-width:20px;min-height:20px;min-width:20px}.__dtb input[type=range]::-moz-range-thumb{-moz-appearance:none;appearance:none;background:hsla(0,0%,100%,.8);border:1px solid #999;border:1px solid var(--light-gray);border-radius:5px;border-radius:var(--button-border-radius);cursor:pointer;max-height:20px;max-width:20px;min-height:20px;min-width:20px}.__dtb .right{text-align:right}.__dtb .center{text-align:center}.__dtb .footer-bar,.__dtb .header-bar{grid-gap:5px;align-items:center;background:#111;background:var(--bg-color);border-bottom:1px solid #333;border-bottom:1px solid var(--grid-line-color);display:grid;left:0;padding:25px 10px;position:fixed;right:0;top:0;z-index:1}.__dtb .footer-bar.pad-info,.__dtb .footer-bar.project-info,.__dtb .footer-bar.project-list,.__dtb .header-bar.pad-info,.__dtb .header-bar.project-info,.__dtb .header-bar.project-list{grid-template-columns:30% 1fr 30%}.__dtb .footer-bar.pad-info button,.__dtb .footer-bar.pad-info>div,.__dtb .footer-bar.project-info button,.__dtb .footer-bar.project-info>div,.__dtb .footer-bar.project-list button,.__dtb .footer-bar.project-list>div,.__dtb .header-bar.pad-info button,.__dtb .header-bar.pad-info>div,.__dtb .header-bar.project-info button,.__dtb .header-bar.project-info>div,.__dtb .header-bar.project-list button,.__dtb .header-bar.project-list>div{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.__dtb .footer-bar.rec-bar,.__dtb .header-bar.rec-bar{grid-template-columns:1fr auto}.__dtb .footer-bar{border-bottom:initial;border-top:1px solid #333;border-top:1px solid var(--grid-line-color);bottom:0;position:fixed;top:auto}.__dtb .form .form-row{align-items:center;display:grid;grid-template-columns:150px 1fr;padding:5px 0}.__dtb .form .field{grid-gap:25px;align-items:center;display:grid;grid-template-columns:1fr auto}.__dtb .form .field-val{min-width:50px}.__dtb .main{padding:10px}.__dtb .track-preview{grid-gap:3px;display:grid;grid-auto-flow:column}.__dtb .track-preview .measure{background:hsla(0,0%,100%,.067);flex:1;padding:3px;transition:background .3s}.__dtb .track-preview .measure.active{background:hsla(0,0%,100%,.2)}.__dtb .track-preview .sample{background:rgba(0,0,0,.4);height:2px;margin-bottom:1px;position:relative}.__dtb .track-preview .sample:first-child .hit{background:#a7e6d0;background:var(--pad-button-color--1)}.__dtb .track-preview .sample:nth-child(2) .hit{background:#deedc1;background:var(--pad-button-color--2)}.__dtb .track-preview .sample:nth-child(3) .hit{background:#fed4b8;background:var(--pad-button-color--3)}.__dtb .track-preview .sample:nth-child(4) .hit{background:#fdaba2;background:var(--pad-button-color--4)}.__dtb .track-preview .sample:nth-child(5) .hit{background:#fc8004;background:var(--pad-button-color--5)}.__dtb .track-preview .sample:nth-child(6) .hit{background:#f59d54;background:var(--pad-button-color--6)}.__dtb .track-preview .sample:nth-child(7) .hit{background:#ef8152;background:var(--pad-button-color--7)}.__dtb .track-preview .sample:nth-child(8) .hit{background:#fd8b93;background:var(--pad-button-color--8)}.__dtb .track-preview .sample:nth-child(9) .hit{background:#fda604;background:var(--pad-button-color--9)}.__dtb .track-preview .sample:nth-child(10) .hit{background:#fdcb00;background:var(--pad-button-color--10)}.__dtb .track-preview .sample:nth-child(11) .hit{background:#fee503;background:var(--pad-button-color--11)}.__dtb .track-preview .sample:nth-child(12) .hit{background:#faff02;background:var(--pad-button-color--12)}.__dtb .track-preview .sample:nth-child(13) .hit{background:#395a7a;background:var(--pad-button-color--13)}.__dtb .track-preview .sample:nth-child(14) .hit{background:#3d9a83;background:var(--pad-button-color--14)}.__dtb .track-preview .sample:nth-child(15) .hit{background:#e0e58e;background:var(--pad-button-color--15)}.__dtb .track-preview .sample:nth-child(16) .hit{background:#a0d072;background:var(--pad-button-color--16)}.__dtb .track-preview .hit{background:red;border-radius:100px;height:2px;position:absolute;top:0;width:5px}",""]),o.locals={},t.exports=o},328:function(t,e,r){"use strict";r.r(e);r(45),r(46),r(27),r(23),r(30),r(47),r(48),r(28);var o=r(10),n=(r(14),r(210),r(36),r(85),r(38),r(44),r(43),r(313));function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,c=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,n=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw n}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var l={data:function(){return{mode:0,projects:[],currentProjectIdx:0,currentTrackIdx:0,playing:!1,recording:!1,context:null,analyser:null,gainNode:null,contextCurrentTime:0,prewriteInterval:null,prewriteTime:0,recCountdownText:0,recCountdownPlayInterval:null,minusRecCountdownTextInterval:null}},head:function(){return{script:[{src:"https://kit.fontawesome.com/89064da233.js"}]}},computed:{project:function(){return this.projects[this.currentProjectIdx]},tracks:function(){var t;return(null===(t=this.project)||void 0===t?void 0:t.tracks)||[]},track:function(){return this.tracks[this.currentTrackIdx]}},watch:{projects:{deep:!0,handler:function(t){window.localStorage.setItem("projects",JSON.stringify(this.projects))}},playing:{immediate:!0,handler:function(t){t&&window.requestAnimationFrame(this.updateContextCurrentTime)}}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.projects=JSON.parse(window.localStorage.getItem("projects"))||JSON.parse(JSON.stringify(n.d)),t.initAudio(),e.next=4,t.loadSamples();case 4:case"end":return e.stop()}}),e)})))()},methods:{initAudio:function(){this.context&&this.context.suspend(),this.prewriteTime=0,this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.gainNode=this.context.createGain(),this.analyser.connect(this.context.destination),this.gainNode.gain.value=.25,this.gainNode.connect(this.analyser)},loadSamples:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,track,n,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c(t.tracks),e.prev=1,r.s();case 3:if((o=r.n()).done){e.next=25;break}track=o.value,n=c(track.samples),e.prev=6,n.s();case 8:if((d=n.n()).done){e.next=15;break}if(!(l=d.value)){e.next=13;break}return e.next=13,t.loadSample(l);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:e.next=3;break;case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(1),r.e(e.t1);case 30:return e.prev=30,r.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[1,27,30,33],[6,17,20,23]])})))()},loadSample:function(t){var e=this;return new Promise((function(r,o){var c=n.b.find((function(e){return e.id===t}));if(c&&c.body)r(!0);else{var path=null==c?void 0:c.source;path?window.fetch(path).then((function(t){return t.arrayBuffer()})).then((function(t){e.context.decodeAudioData(t,(function(t){c.audioBuffer=t,r(!0)}),(function(t){o(t)}))})).catch((function(t){o(t)})):o(new Error("no such sample"))}}))},hitStart:function(t){var e=this.getSampleByKeyIdx(t);if(e&&(this.playSample(e),this.recording)){var r=this.contextCurrentTime,o=60/this.project.speed,n=o*this.project.beats,c=o*this.project.beats,d=Math.floor(r/c)%this.project.measures,l=r%c/c;this.track.hits.push({sample:t,measure:d,pos:l});var f=o*this.project.beats*this.project.measures;r%f>f/2&&this.playSampleById(e.id,r+f+n)}},hitEnd:function(t){},getSampleByKeyIdx:function(t){var e=this.track.samples[t];return n.b.find((function(t){return t.id===e}))},playSampleById:function(t,time){if(t){var e=n.b.find((function(e){return e.id===t}));this.playSample(e,time)}},playSample:function(t,time){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,source;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.audioBuffer){r.next=3;break}return r.next=3,e.loadSample(t.id);case 3:o=t.audioBuffer,(source=e.context.createBufferSource()).buffer=o,source.connect(e.context.destination),source.start(time);case 8:case"end":return r.stop()}}),r)})))()},showProjects:function(){this.mode=0},showProject:function(t){this.mode=1,isNaN(t)||(this.currentProjectIdx=t)},showPad:function(t){this.currentTrackIdx=t,this.mode=2},updateProject:function(t){this.projects[this.currentProjectIdx].name=t.name,this.projects[this.currentProjectIdx].measures=t.measures,this.projects[this.currentProjectIdx].speed=t.speed,this.projects[this.currentProjectIdx].beats=t.beats},play:function(){this.recording||this.initAudio(),this.playing=!0,this.prewrite(!0)},stop:function(){this.recording=this.playing=!1,clearInterval(this.prewriteInterval),clearInterval(this.recCountdownPlayInterval),clearInterval(this.minusRecCountdownTextInterval),this.initAudio(),this.recCountdownText=0},rec:function(){this.initAudio(),this.countdownBeep(),this.recording=!0},updateContextCurrentTime:function(){if(this.recording){var t=60/this.project.speed*this.project.beats;this.contextCurrentTime=this.context.currentTime-t}else this.contextCurrentTime=this.context.currentTime;this.playing&&window.requestAnimationFrame(this.updateContextCurrentTime)},countdownBeep:function(){for(var t=this,e=60/this.project.speed,r=e*this.project.beats,o=this.project.beats*this.project.measures,i=0;i<o;)this.beep(e*i,i),i++;this.recCountdownText=this.project.beats,this.minusRecCountdownText(),this.recCountdownPlayInterval=setTimeout((function(){t.play()}),1e3*r)},minusRecCountdownText:function(){var t=this,e=60/this.project.speed;this.minusRecCountdownTextInterval=setTimeout((function(){t.recCountdownText--,t.recCountdownText&&t.minusRecCountdownText()}),1e3*e)},prewrite:function(t){var e=this,r=60/this.project.speed,o=r*this.project.beats*this.project.measures,n=r*this.project.beats;if(this.recording)for(var c=this.project.beats*this.project.measures,i=0;i<c;)this.beep(r*i+this.prewriteTime,i),i++;this.tracks.filter((function(track){return!track.muted})).forEach((function(track){var t=track.samples;track.hits.forEach((function(o){var c=t[o.sample],time=e.prewriteTime+o.measure*r*e.project.beats+o.pos*r*e.project.beats+(e.recording?n:0);e.playSampleById(c,time)}))})),this.prewriteTime+=o;var d=o/(t?2:1);this.prewriteInterval=setTimeout((function(){e.prewrite()}),1e3*d)},beep:function(t,e){var i=e%this.project.beats,r=this.context.createOscillator();r.type=n.c[i].type,r.frequency.value=n.c[i].freq,r.connect(this.gainNode),r.start(t),r.stop(t+.05)},removeHits:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("Are you sure?");case 2:if(!e.sent){e.next=4;break}t.track.hits=[];case 4:case"end":return e.stop()}}),e)})))()},muteTrack:function(t){this.tracks[t].muted=!this.tracks[t].muted,this.tracks.push({}),this.tracks.pop()}}},f=(r(319),r(35)),component=Object(f.a)(l,(function(){var t=this,e=t._self._c;return e("client-only",[e("div",{staticClass:"__dtb"},[0===t.mode?e("ProjectList",{attrs:{projects:t.projects},on:{showProject:function(e){return t.showProject(e)},back:function(e){return t.showProjects()}}}):t._e(),t._v(" "),1===t.mode?e("ProjectTracks",{attrs:{project:t.project,playing:t.playing,recording:t.recording,contextCurrentTime:t.contextCurrentTime},on:{update:function(e){return t.updateProject(e)},showPad:function(e){return t.showPad(e)},back:function(e){return t.showProjects()},removeHits:function(e){return t.removeHits()},muteTrack:function(e){return t.muteTrack(e)}}}):t._e(),t._v(" "),2===t.mode?e("Pad",{attrs:{project:t.project,track:t.track,playing:t.playing,recording:t.recording,contextCurrentTime:t.contextCurrentTime},on:{hitStart:function(e){return t.hitStart(e)},hitEnd:function(e){return t.hitEnd(e)},close:function(e){return t.showProject()},preview:function(e){return t.playSampleById(e)}}}):t._e(),t._v(" "),1===t.mode||2===t.mode?e("Rec",{attrs:{mode:t.mode,project:t.project,playing:t.playing,recording:t.recording,recCountdownText:t.recCountdownText,contextCurrentTime:t.contextCurrentTime},on:{play:function(e){return t.play()},stop:function(e){return t.stop()},rec:function(e){return t.rec()},update:function(e){return t.updateProject(e)},removeHits:function(e){return t.removeHits()}}}):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ProjectList:r(316).default,ProjectTracks:r(317).default,Pad:r(327).default,Rec:r(318).default})}}]);